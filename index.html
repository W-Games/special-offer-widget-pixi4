<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Special Offer</title>
	</head>
<body>

<button onclick="ShowDeal()">Show Deal</button>
<button onclick="HideDeal()">Hide Deal</button>

<style type="text/css"> 
	html { 
        overflow: auto; 
    } 
      
    html, 
    body {
		font-family: 'Roboto', 'Arial';
        background-color: #cccccc;
    }

	.container {
		position: relative;
	}

	.bg {
		top: 0px;
		left: 0px;
		user-select: none;
	}
	
	canvas {
		top: 0px;
		left: 0px;
		margin-top: 0px;
		position: absolute;
		user-select: none;
	}
</style>

<script>
	function HideDeal() {
		const jsonData = { 
			"_type": "HRD.HideDeal"
		}; 

		SendMessageToCSharp(JSON.stringify(jsonData));
	}
	
	function ShowDeal() {
		const jsonData = { 
			"_type": "HRD.ShowDeal"
		}; 

		SendMessageToCSharp(JSON.stringify(jsonData));
	}

	function UpdateDealTimer(time) {
		const jsonData = { 
			"_type": "HRD.UpdateTimer",
			"_time": time
		}; 

    	SendMessageToCSharp(JSON.stringify(jsonData));
	}

	function SendMessageToCSharp(data) {
		window.postMessage({ message: data });
  	}

	// let countDownDate = new Date();
	// countDownDate = new Date(countDownDate.getTime() + 2 * 60 * 1000);

	// let x = setInterval(function() {
	// 	let now = new Date().getTime();
	// 	let distance = countDownDate - now;
	// 	let minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
	// 	let seconds = Math.floor((distance % (1000 * 60)) / 1000);
		
	// 	if (distance < 0) {
	// 		clearInterval(x);
	// 	}
	// 	else {
	// 		UpdateDealTimer((minutes < 10 ? "0" : "") + minutes + ":" + (seconds <  10 ? "0" : "") + seconds);
	// 	}
	// }, 1000);

	window.addEventListener("message", (event) => {
		if (event.data != null) {
			let message = JSON.parse(event.data.message);			
            
			switch(message._type) {
				case "HRD.DealClicked": {
					console.log("Deal Clicked");
                    break;
                }
            }
        }
	});
</script>

<div class="container">
	<!-- Uncomment this for iframe and comment out div below -->
	<div class="bg">
		<iframe 
			frameborder="1"                          
			marginheight="0" 
			marginwidth="0" 
			width="100%" 
			height="300px" 
			scrolling="auto",
			id="frame"
			src="output/games/special_offer/assets/textures/bg.png">
	    </iframe>
	</div>

	<!-- Uncomment this for div and comment out above iframe -->
	<!-- <div class="bg">
		<img src="output/games/special_offer/assets/textures/bg.png" style="width: 100%; height: 100%">
	</div> -->
	<canvas id="canvas"></canvas>
</div>

<script src="output/games/special_offer/assets/game.js"></script>

</body>
</html>